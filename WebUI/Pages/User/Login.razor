@page "/login"
@inherits UserBase<LoginRequest>

<h1>Bejelentkezés</h1>

<FluentCard Width="100%" Height="auto">
    <EditForm Model="ViewModel" OnValidSubmit="LoginAsync">
        <FluentValidationValidator />

        <FormInput ValidationFor="() => ViewModel.UserName">
            <FluentTextField @bind-Value="ViewModel.UserName">Felhasználónév:</FluentTextField>
        </FormInput>

        <FormInput ValidationFor="() => ViewModel.Password">
            <FluentTextField TextFieldType="TextFieldType.Password" @bind-Value="ViewModel.Password">Jelszó:</FluentTextField>
        </FormInput>

        <FormSubmit Title="Bejelentkezés" />
    </EditForm>
</FluentCard>

@code {

    protected override Task SetViewModelAsync()
    {
        ViewModel = new LoginRequest();
        return Task.CompletedTask;
    }

    private async Task LoginAsync()
    {
        await HandleRequestAsync(
            () => Service.LoginAsync(ViewModel),
            () => NavigationManager.NavigateTo("/"));
    }

}